<div class="p-grid ui-fluid">
  <div class="p-col-12 p-lg-12">
    <div class="p-grid">
      <div class="p-col-12">
        <div class="card card-w-title">
          <h1 class="titel-steps">Nouvelle vente privée</h1>
          <div class="p-grid ui-fluid">
            <div class="p-col-2">
            </div>
            <div class="p-col-8">
              <p-steps [model]="stepsItems" [activeIndex]="2"></p-steps>
            </div>
            <div class="p-col-2">
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="p-grid ui-fluid">
  <div class="p-col-12 p-lg-12">
    <div class="p-grid">
      <div class="p-col-12">
        <div class="card card-w-title">
          <h1>Les produits</h1>
          <div class="p-grid form-group block-marge">
            <div class="p-col-1 p-md-1">
            </div>

            <div class="p-col-10 p-md-10">
              <p-table #dt [columns]="cols" styleClass="ui-table-cars" [value]="currentProducts" [paginator]="true"
                [rows]="5" dataKey="label" selectionMode="single" [(selection)]="selectedProduct">
                <ng-template pTemplate="header" let-columns>
                  <tr>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field" [ngSwitch]="col.field">
                      {{col.header}}
                      <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                    <th style="width: 8em; text-align: center;">
                      <button pButton type="button" (click)="goCreateProduct()" icon="pi pi-plus"></button>
                    </th>
                  </tr>

                  <tr>
                    <th *ngFor="let col of columns" [ngSwitch]="col.field" style="padding: .5em;">
                      <input *ngSwitchCase="'label'" pInputText type="text" placeholder="Commence par"
                        class="ui-column-filter" style="width: 100%; margin-top: 0;"
                        (input)="dt.filter($event.target.value, col.field, 'startsWith')">
                      <input *ngSwitchCase="'description'" pInputText type="text" placeholder="Commence par"
                        class="ui-column-filter" style="width: 100%; margin-top: 0;"
                        (input)="dt.filter($event.target.value, col.field, 'startsWith')">
                      <input *ngSwitchCase="'price'" pInputText type="text" placeholder="Commence par"
                        class="ui-column-filter" style="width: 100%; margin-top: 0;"
                        (input)="dt.filter($event.target.value, col.field, 'startsWith')">
                      <input *ngSwitchCase="'percentage'" pInputText type="text" placeholder="Commence par"
                        class="ui-column-filter" style="width: 100%; margin-top: 0;"
                        (input)="dt.filter($event.target.value, col.field, 'startsWith')">
                      <input *ngSwitchCase="'stock'" pInputText type="text" placeholder="Commence par"
                        class="ui-column-filter" style="width: 100%; margin-top: 0;"
                        (input)="dt.filter($event.target.value, col.field, 'startsWith')">
                    </th>
                    <th style="width: 8em;">
                    </th>
                  </tr>
                </ng-template>

                <ng-template pTemplate="body" let-rowData let-columns="columns">
                  <tr [pSelectableRow]="rowData" [pEditableRow]="rowData">

                    <td (click)="showProduct($event,op3)">{{rowData.label}}</td>
                    <td>{{rowData.description}}</td>
                    <td>{{rowData.price}}</td>
                    <td>{{rowData.percentage}}%</td>
                    <td>{{rowData.stock}}</td>
                    <td>
                      <button pButton type="button" class="ui-button-warning" (click)="goUpdateProduct(rowData)"
                        icon="pi pi-pencil" style="margin-right: .5em"></button>
                      <button pButton type="button" class="ui-button-danger" (click)="confirmDeleteProduct(rowData)" icon="pi pi-trash"></button>
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>


            <p-overlayPanel [baseZIndex]="9999999" #op3>
              <p-lightbox [images]="images"></p-lightbox>
            </p-overlayPanel>

            <div class="p-col-1 p-md-1">
            </div>

          </div>

          <div class="p-grid form-group block-marge">
            <div class="p-col-3 p-md-3">
            </div>

            <div class="p-col-3 p-md-3">
              <button type="button" (click)="goBack()" label="Précédent" pButton></button>
            </div>

            <div class="p-col-3 p-md-3">
              <button type="button"  (click)="goNext()" label="Suivant" pButton></button>
            </div>

            <div class="p-col-3 p-md-3">
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<p-dialog header="Confirmation" [(visible)]="display" modal="true" showEffect="fade" [style]="{width: '400px'}">
  <p style="margin-top: 1em; margin-bottom: 1em">
    Voulez-vous supprimer le produit ?
  </p>
  <p-footer>
    <button type="button" pButton icon="pi pi-check" (click)="onDeleteProduct()" label="Oui"></button>
    <button type="button" pButton icon="pi pi-times" (click)="display=false" label="Non"
      class="ui-button-secondary"></button>
  </p-footer>
</p-dialog>